---
import Layout from "src/layouts/Layout.astro";
import { AlltimeStats } from "src/components/AlltimeStats";
import { alltimeStats } from "src/api/alltimeStats";
import { getFluidWidthPosters, getFixedWidthPosters } from "src/api/posters";
import { MostWatchedMoviesPosterConfig } from "src/components/MostWatchedMovies";
import { ListItemPosterImageConfig } from "src/components/ListItemPoster";

const { stats, distinctStatYears } = await alltimeStats();

const mostWatchedPeoplePosters = await getFixedWidthPosters(
  ListItemPosterImageConfig
);
const mostWatchedMoviePosters = await getFluidWidthPosters(
  MostWatchedMoviesPosterConfig
);
---

<Layout
  title="All-Time Stats"
  description="My most-watched titles, performers, directors, writers and other stats."
>
  <AlltimeStats
    stats={stats}
    distinctStatYears={distinctStatYears}
    mostWatchedMoviesPosters={mostWatchedMoviePosters}
    mostWatchedPeoplePosters={mostWatchedPeoplePosters}
  />
</Layout>
